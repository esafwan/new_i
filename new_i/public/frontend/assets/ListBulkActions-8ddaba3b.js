import{a0 as A,b as n,c as y,L as x,e as d,t as E,u as t,g,C as W,ak as Y,l as S,k as C,i as R,M as V,N as M,n as j,p as te,ap as Z,F as B,f as G,O as se,w as T,G as U,_ as oe,d as L,H as re,aF as ue,al as ce,y as de,j as me,Y as pe,m as J,h as le,x as fe,a as ae,r as ee,I as F,B as N,aB as q,v as ge}from"./index-29a91f62.js";import{u as ye}from"./Dropdown-a48e38bc.js";import{_ as ve,g as we}from"./global-7d1669ca.js";import{a as he,_ as _e,T as be}from"./Link-00b86c9a.js";import{D as ke}from"./NestedPopover-620c36ca.js";import{_ as xe}from"./AssignmentModal-8d3e4385.js";import{r as $e,e as I}from"./index-12263c08.js";const Re={class:"flex h-full w-full flex-col items-center justify-center text-base"},Ce={class:"text-xl font-medium"},Ve={class:"mt-1 text-base text-gray-600"},Se={__name:"ListEmptyState",setup(s){const l=A("list");return(e,i)=>(n(),y("div",Re,[x(e.$slots,"default",{},()=>[d("div",Ce,E(t(l).options.emptyState.title),1),d("div",Ve,E(t(l).options.emptyState.description),1),t(l).options.emptyState.button?(n(),g(Y,W({key:0},t(l).options.emptyState.button,{class:"mt-4"}),null,16)):S("",!0)])]))}};function ne(s,l=!0){let e=l?"14px ":"",i=s.map(a=>{let r=a.width||1;return typeof r=="number"?r+"fr":r}).join(" ");return e+i}const Q={left:"justify-start",start:"justify-start",center:"justify-center",middle:"justify-center",right:"justify-end",end:"justify-end"},Ae={class:"truncate"},Le={__name:"ListHeaderItem",props:{item:{type:Object,required:!0},debounce:{type:Number,default:1e3}},emits:["columnWidthUpdated"],setup(s,{emit:l}){const e=s,i=l,a=C(null),r=C(null),k=R(()=>{if(typeof e.item.width=="string"){const v=parseInt(e.item.width);if(e.item.width.includes("rem"))return v*16;if(e.item.width.includes("px"))return v}return r.value.offsetWidth}),w=v=>{const $=v.clientX,m=k.value,h=z=>{document.body.classList.add("select-none"),document.body.classList.add("cursor-col-resize"),a.value.style.backgroundColor="rgb(199 199 199)";let O=m+(z.clientX-$);e.item.width=`${O<50?50:O}px`,b(e.item.width)},_=()=>{document.body.classList.remove("select-none"),document.body.classList.remove("cursor-col-resize"),a.value.style.backgroundColor="",window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",_)};window.addEventListener("mousemove",h),window.addEventListener("mouseup",_)},b=ye(v=>{e.item.width=v,i("columnWidthUpdated")},e.debounce),f=A("list");return(v,$)=>(n(),y("div",{ref_key:"columnRef",ref:r,class:j(["group flex items-center",s.item.align?t(Q)[s.item.align]:"justify-between"])},[d("div",{class:j(["flex items-center space-x-2 truncate text-sm text-gray-600",v.$attrs.class])},[x(v.$slots,"prefix",V(M({item:s.item}))),x(v.$slots,"default",{},()=>[d("div",Ae,E(s.item.label),1)]),x(v.$slots,"suffix",V(M({item:s.item})))],2),t(f).options.resizeColumn?x(v.$slots,"resizer",V(W({key:0},{item:s.item})),()=>[d("div",{class:"flex h-4 w-2 cursor-col-resize justify-center",onMousedown:w},[d("div",{ref_key:"resizer",ref:a,class:"h-full w-[2px] rounded-full transition-all duration-300 ease-in-out group-hover:bg-gray-400"},null,512)],32)]):S("",!0)],2))}},je={__name:"ListHeader",emits:["columnWidthUpdated"],setup(s,{emit:l}){const e=l,i=A("list");return(a,r)=>(n(),y("div",{class:"mb-2 grid items-center space-x-4 rounded bg-gray-100 p-2",style:se({gridTemplateColumns:t(ne)(t(i).columns,t(i).options.selectable)})},[t(i).options.selectable?(n(),g(Z,{key:0,class:"cursor-pointer duration-300",modelValue:t(i).allRowsSelected,onClick:te(t(i).toggleAllRows,["stop"])},null,8,["modelValue","onClick"])):S("",!0),x(a.$slots,"default",{},()=>[(n(!0),y(B,null,G(t(i).columns,k=>(n(),g(Le,{key:k.key,item:k,onColumnWidthUpdated:w=>e("columnWidthUpdated",k)},null,8,["item","onColumnWidthUpdated"]))),128))])],4))}},ze={class:"truncate text-base"},De={__name:"ListRowItem",props:{column:{type:Object,default:{}},row:{type:Object,default:{}},item:{type:[String,Number,Object],default:""},align:{type:String,default:"left"}},setup(s){const l=s,e=R(()=>i(l.item).label||"");function i(r){return r&&typeof r=="object"?r:{label:r}}const a=A("list");return(r,k)=>(n(),g(U(t(a).options.showTooltip?t(ve):"div"),V(M(t(a).options.showTooltip?{text:e.value}:{})),{default:T(()=>[d("div",{class:j(["flex items-center space-x-2",t(Q)[s.align]])},[x(r.$slots,"prefix",{},()=>[s.column.prefix?(n(),g(U(typeof s.column.prefix=="function"?s.column.prefix({row:s.row}):s.column.prefix),{key:0})):S("",!0)]),x(r.$slots,"default",V(M({label:e.value})),()=>{var w;return[d("div",ze,E((w=s.column)!=null&&w.getLabel?s.column.getLabel({row:s.row}):e.value),1)]}),x(r.$slots,"suffix")],2)]),_:3},16))}},Ee={key:0,class:"mx-2 h-px border-t border-gray-200"},ie={__name:"ListRow",props:{row:{type:Object,required:!0}},setup(s){const l=s,e=A("list"),i=R(()=>{var w;return(w=e.value.rows)!=null&&w.length?e.value.rows[e.value.rows.length-1][e.value.rowKey]===l.row[e.value.rowKey]:!1}),a=R(()=>e.value.selections.has(l.row[e.value.rowKey])),r=R(()=>e.value.options.getRowRoute||e.value.options.onRowClick),k=R(()=>typeof e.value.options.rowHeight=="number"?`${e.value.options.rowHeight}px`:e.value.options.rowHeight);return(w,b)=>(n(),g(U(t(e).options.getRowRoute?"router-link":"div"),W({class:[{"cursor-pointer":r.value},"flex flex-col transition-all duration-300 ease-in-out"]},{to:t(e).options.getRowRoute?t(e).options.getRowRoute(s.row):void 0,onClick:t(e).options.onRowClick?()=>t(e).options.onRowClick(s.row):void 0}),{default:T(()=>[(n(),g(U(t(e).options.getRowRoute?"template":"button"),{class:"[all:unset] hover:[all:unset]"},{default:T(()=>[d("div",{class:j(["grid items-center space-x-4 rounded px-2",[a.value?"bg-gray-100":"",r.value?a.value?"hover:bg-gray-200":"hover:bg-gray-50":""]]),style:se({height:k.value,gridTemplateColumns:t(ne)(t(e).columns,t(e).options.selectable)})},[t(e).options.selectable?(n(),g(Z,{key:0,modelValue:t(e).selections.has(s.row[t(e).rowKey]),onClick:b[0]||(b[0]=te(f=>t(e).toggleRow(s.row[t(e).rowKey]),["stop"])),class:"cursor-pointer duration-300"},null,8,["modelValue"])):S("",!0),(n(!0),y(B,null,G(t(e).columns,(f,v)=>(n(),y("div",{key:f.key,class:j([t(Q)[f.align],v==0?"text-gray-900":"text-gray-700"])},[x(w.$slots,"default",V(M({idx:v,column:f,item:s.row[f.key]})),()=>[t(e).slots.cell?(n(),g(U(t(e).slots.cell),V(W({key:0},{column:f,row:s.row,item:s.row[f.key],align:f.align})),null,16)):(n(),g(De,{key:1,column:f,row:s.row,item:s.row[f.key],align:f.align},null,8,["column","row","item","align"]))])],2))),128))],6),i.value?S("",!0):(n(),y("div",Ee))]),_:3}))]),_:3},16,["class"]))}},Me={class:"h-full overflow-y-auto"},Te={__name:"ListRows",setup(s){const l=A("list");return(e,i)=>(n(),y("div",Me,[x(e.$slots,"default",{},()=>[(n(!0),y(B,null,G(t(l).rows,a=>(n(),g(ie,{key:a[t(l).rowKey],row:a},null,8,["row"]))),128))])]))}},Be={},Oe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16"},He=d("path",{fill:"currentColor",d:"M4.293 5.28h7.413a.5.5 0 0 1 .41.787l-3.707 5.295a.5.5 0 0 1-.82 0L3.884 6.067a.5.5 0 0 1 .41-.787Z"},null,-1),Ne=[He];function Ue(s,l){return n(),y("svg",Oe,Ne)}const We=oe(Be,[["render",Ue]]),Ke={class:"flex items-center"},Fe={class:"w-full py-1.5 pr-2"},Ge={key:1,class:"text-base font-medium leading-6"},qe=d("div",{class:"mx-2 h-px border-t border-gray-200"},null,-1),Ie={__name:"ListGroupHeader",props:{group:{type:Object,required:!0}},setup(s){const l=s,e=A("list");function i(){l.group.collapsed==null&&(l.group.collapsed=!1),l.group.collapsed=!l.group.collapsed}return(a,r)=>(n(),y(B,null,[d("div",Ke,[d("button",{onClick:i,class:"ml-[3px] mr-[11px] rounded p-1 hover:bg-gray-100"},[L(We,{class:j(["h-4 w-4 text-gray-900 transition-transform duration-200",[s.group.collapsed?"-rotate-90":""]])},null,8,["class"])]),x(a.$slots,"default",{},()=>[d("div",Fe,[t(e).slots["group-header"]?(n(),g(U(t(e).slots["group-header"]),V(W({key:0},{group:s.group})),null,16)):(n(),y("span",Ge,E(s.group.group),1))])])]),qe],64))}},Pe={key:0,class:"mb-5 mt-2"},Xe={__name:"ListGroupRows",props:{group:{type:Object,required:!0}},setup(s){const l=A("list");return(e,i)=>s.group.collapsed?S("",!0):(n(),y("div",Pe,[x(e.$slots,"default",{},()=>[(n(!0),y(B,null,G(s.group.rows,a=>(n(),g(ie,{key:a[t(l).rowKey],row:a},null,8,["row"]))),128))])]))}},Ye={class:"h-full overflow-y-auto"},Je={__name:"ListGroups",setup(s){const l=A("list");return(e,i)=>(n(),y("div",Ye,[(n(!0),y(B,null,G(t(l).rows,a=>(n(),y("div",{key:a.group},[x(e.$slots,"default",{},()=>[L(Ie,{group:a},{default:T(()=>[e.$slots["group-header"]?x(e.$slots,"group-header",V(W({key:0},{group:a}))):S("",!0)]),_:2},1032,["group"]),L(Xe,{group:a},null,8,["group"])])]))),128))]))}},Ze={key:0,class:"absolute inset-x-0 bottom-6 mx-auto w-max text-base"},Qe={class:"flex flex-1 justify-between border-r border-gray-300 text-gray-900"},et={class:"flex items-center space-x-3"},tt={class:"mr-3"},st={class:"flex items-center space-x-1"},ot=Object.assign({inheritAttrs:!1},{__name:"ListSelectBanner",setup(s){const l=A("list");let e=R(()=>{let i=l.value.selections.size===1?"Row":"Rows";return`${l.value.selections.size} ${i} selected`});return(i,a)=>(n(),g(ue,{"enter-active-class":"duration-300 ease-out","enter-from-class":"transform opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0"},{default:T(()=>[t(l).selections.size?(n(),y("div",Ze,[d("div",{class:j(["flex min-w-[596px] items-center space-x-3 rounded-lg bg-white px-4 py-2 shadow-2xl",i.$attrs.class])},[x(i.$slots,"default",V(M({selections:t(l).selections,allRowsSelected:t(l).allRowsSelected,selectAll:()=>t(l).toggleAllRows(!0),unselectAll:()=>t(l).toggleAllRows(!1)})),()=>[d("div",Qe,[d("div",et,[L(Z,{modelValue:!0,disabled:!0,class:"text-gray-900"}),d("div",null,E(t(e)),1)]),d("div",tt,[x(i.$slots,"actions",V(M({selections:t(l).selections,allRowsSelected:t(l).allRowsSelected,selectAll:()=>t(l).toggleAllRows(!0),unselectAll:()=>t(l).toggleAllRows(!1)})))])]),d("div",st,[L(Y,{class:j(["w- text-gray-700",t(l).allRowsSelected?"cursor-not-allowed":""]),disabled:t(l).allRowsSelected,variant:"ghost",onClick:a[0]||(a[0]=r=>t(l).toggleAllRows(!0))},{default:T(()=>[re(" Select all ")]),_:1},8,["disabled","class"]),L(Y,{icon:"x",variant:"ghost",onClick:a[1]||(a[1]=r=>t(l).toggleAllRows(!1))})])])],2)])):S("",!0)]),_:3}))}}),lt={class:"relative flex w-full flex-1 flex-col overflow-x-auto"},bt=Object.assign({inheritAttrs:!1},{__name:"ListView",props:{columns:{type:Array,default:[]},rows:{type:Array,default:[]},rowKey:{type:String,required:!0},options:{type:Object,default:()=>({getRowRoute:null,onRowClick:null,showTooltip:!0,selectable:!0,resizeColumn:!1,rowHeight:40,emptyState:{title:"No Data",description:"No data available"}})}},emits:["update:selections"],setup(s,{emit:l}){const e=s,i=ce();let a=de(new Set);const r=l;me(a,m=>{r("update:selections",m)});let k=R(()=>{function m(_){return _===void 0?!0:_}function h(_){return _===void 0?!1:_}return{getRowRoute:e.options.getRowRoute||null,onRowClick:e.options.onRowClick||null,showTooltip:m(e.options.showTooltip),selectable:m(e.options.selectable),resizeColumn:h(e.options.resizeColumn),rowHeight:e.options.rowHeight||40,emptyState:e.options.emptyState}});const w=R(()=>e.rows.length?f.value?a.size===e.rows.reduce((m,h)=>m+h.rows.length,0):a.size===e.rows.length:!1),b=R(()=>k.value.selectable);let f=R(()=>e.rows.every(m=>m.group&&m.rows&&Array.isArray(m.rows)));function v(m){a.delete(m)||a.add(m)}function $(m){if(!m||w.value){a.clear();return}if(f.value){e.rows.forEach(h=>{h.rows.forEach(_=>a.add(_[e.rowKey]))});return}e.rows.forEach(h=>a.add(h[e.rowKey]))}return pe("list",R(()=>({rowKey:e.rowKey,rows:e.rows,columns:e.columns,options:k.value,selections:a,allRowsSelected:w.value,slots:i,toggleRow:v,toggleAllRows:$}))),(m,h)=>(n(),y("div",lt,[d("div",{class:j(["flex w-max min-w-full flex-col overflow-y-hidden",m.$attrs.class])},[x(m.$slots,"default",V(M({showGroupedRows:t(f),selectable:b.value})),()=>[L(je),e.rows.length?(n(),y(B,{key:0},[t(f)?(n(),g(Je,{key:0})):(n(),g(Te,{key:1}))],64)):(n(),g(Se,{key:1})),b.value?(n(),g(ot,{key:2})):S("",!0)])],2)]))}}),at={},nt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"fillCurrent",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-heart"},it=d("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"},null,-1),rt=[it];function ut(s,l){return n(),y("svg",nt,rt)}const kt=oe(at,[["render",ut]]),ct={class:"mb-4"},dt={class:"mb-1.5 text-sm text-gray-600"},mt={class:"mb-1.5 text-sm text-gray-600"},pt={__name:"EditValueModal",props:J({doctype:{type:String,required:!0},selectedValues:{type:Set,required:!0}},{modelValue:{},modelModifiers:{}}),emits:J(["reload"],["update:modelValue"]),setup(s,{emit:l}){const e=["Check"],i=["Link","Dynamic Link"],a=["Float","Int","Currency","Percent"],r=["Select"],k=["Text Editor"],w=["Date","Datetime"],b=s,f=le(s,"modelValue"),v=l,$=fe({url:"new_i.api.doc.get_fields",cache:["fields",b.doctype],params:{doctype:b.doctype},transform:o=>o.filter(c=>c.hidden==0&&c.read_only==0)});ae(()=>{var o;(o=$.data)!=null&&o.length||$.fetch()});const m=R(()=>{var o;return((o=b.selectedValues)==null?void 0:o.size)||0}),h=C({label:"",type:"",value:"",options:""}),_=C(""),z=C(!1);function O(){let o=_.value;h.value.type=="Check"&&(o=o=="Yes"?1:0),z.value=!0,F("frappe.desk.doctype.bulk_update.bulk_update.submit_cancel_or_update_docs",{doctype:b.doctype,docnames:Array.from(b.selectedValues),action:"update",data:{[h.value.value]:o||null}}).then(()=>{h.value={label:"",type:"",value:"",options:""},_.value="",z.value=!1,f.value=!1,v("reload")})}function P(o){_.value="",o&&(h.value=o)}function K(o){let c=o.target?o.target.value:o;_.value=c}function p(o){return o.split(`
`)}function u(o){const{type:c,options:H}=o;if(r.includes(c)||e.includes(c)){const X=c=="Check"?["Yes","No"]:p(H);return N(q,{type:"select",options:X.map(D=>({label:D,value:D})),modelValue:_.value})}else return i.includes(c)?c=="Dynamic Link"?N(q,{type:"text"}):N(_e,{class:"form-control",doctype:H}):a.includes(c)?N(q,{type:"number"}):w.includes(c)?N(ke):k.includes(c)?N(be,{variant:"outline",editorClass:"!prose-sm overflow-auto min-h-[80px] max-h-80 py-1.5 px-2 rounded border border-gray-300 bg-white hover:border-gray-400 hover:shadow-sm focus:bg-white focus:border-gray-500 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400 text-gray-800 transition-colors",bubbleMenu:!0,content:_.value}):N(q,{type:"text"})}return(o,c)=>{const H=ee("Button"),X=ee("Dialog");return n(),g(X,{modelValue:f.value,"onUpdate:modelValue":c[2]||(c[2]=D=>f.value=D),options:{title:o.__("Bulk Edit")}},{"body-content":T(()=>[d("div",ct,[d("div",dt,E(o.__("Field")),1),L(he,{value:h.value.label,options:t($).data,onChange:c[0]||(c[0]=D=>P(D)),placeholder:o.__("Source")},null,8,["value","options","placeholder"])]),d("div",null,[d("div",mt,E(o.__("Value")),1),(n(),g(U(u(h.value)),{value:_.value,size:"md",onChange:c[1]||(c[1]=D=>K(D)),placeholder:o.__("Contact Us")},null,40,["value","placeholder"]))])]),actions:T(()=>[L(H,{class:"w-full",variant:"solid",onClick:O,loading:z.value,label:o.__("Update {0} Records",[m.value])},null,8,["loading","label"])]),_:1},8,["modelValue","options"])}}},xt={__name:"ListBulkActions",props:J({doctype:{type:String,default:""},options:{type:Object,default:()=>({hideEdit:!1,hideDelete:!1,hideAssign:!1})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s,{expose:l}){const e=s,i=le(s,"modelValue"),a=ge(),{$dialog:r}=we(),k=C(!1),w=C([]),b=C(()=>{});function f(p,u){w.value=p,k.value=!0,b.value=u}function v(p,u){r({title:__("Delete"),message:__("Are you sure you want to delete {0} item(s)?",[p.size]),variant:"solid",theme:"red",actions:[{label:__("Delete"),variant:"solid",theme:"red",onClick:o=>{F("frappe.desk.reportview.delete_items",{items:JSON.stringify(Array.from(p)),doctype:e.doctype}).then(()=>{I({title:__("Deleted successfully"),icon:"check",iconClasses:"text-green-600"}),u(),i.value.reload(),o()})}}]})}const $=C(!1),m=C([]);function h(p,u){$.value=!0,w.value=p,b.value=u}function _(p,u){r({title:__("Clear Assignment"),message:__("Are you sure you want to clear assignment for {0} item(s)?",[p.size]),variant:"solid",theme:"red",actions:[{label:__("Clear Assignment"),variant:"solid",theme:"red",onClick:o=>{F("frappe.desk.form.assign_to.remove_multiple",{doctype:e.doctype,names:JSON.stringify(Array.from(p)),ignore_permissions:!0}).then(()=>{I({title:__("Assignment cleared successfully"),icon:"check",iconClasses:"text-green-600"}),K(u),o()})}}]})}const z=C([]),O=C([]);function P(p,u){let o=[];return e.options.hideEdit||o.push({label:__("Edit"),onClick:()=>f(p,u)}),e.options.hideDelete||o.push({label:__("Delete"),onClick:()=>v(p,u)}),e.options.hideAssign||(o.push({label:__("Assign To"),onClick:()=>h(p,u)}),o.push({label:__("Clear Assignment"),onClick:()=>_(p,u)})),z.value.forEach(c=>{o.push({label:__(c.label),onClick:()=>c.onClick({list:i.value,selections:p,unselectAll:u,call:F,createToast:I,$dialog:r,router:a})})}),o}function K(p){var u,o;(u=b.value)==null||u.call(b),p==null||p(),(o=i.value)==null||o.reload()}return ae(()=>{var p,u,o,c,H;(p=i.value)!=null&&p.data&&($e(i.value.data,{list:i.value,call:F,createToast:I,$dialog:r,router:a}),z.value=((o=(u=i.value)==null?void 0:u.data)==null?void 0:o.bulkActions)||[],O.value=((H=(c=i.value)==null?void 0:c.data)==null?void 0:H.listActions)||[])}),l({bulkActions:P,customListActions:O}),(p,u)=>(n(),y(B,null,[k.value?(n(),g(pt,{key:0,modelValue:k.value,"onUpdate:modelValue":u[0]||(u[0]=o=>k.value=o),doctype:s.doctype,selectedValues:w.value,onReload:K},null,8,["modelValue","doctype","selectedValues"])):S("",!0),$.value?(n(),g(xe,{key:1,modelValue:$.value,"onUpdate:modelValue":u[1]||(u[1]=o=>$.value=o),assignees:m.value,"onUpdate:assignees":u[2]||(u[2]=o=>m.value=o),docs:w.value,doctype:s.doctype,onReload:K},null,8,["modelValue","assignees","docs","doctype"])):S("",!0)],64))}};export{kt as H,je as _,Le as a,De as b,ot as c,bt as d,xt as e,Te as f,ie as g,Ie as h,Xe as i};
//# sourceMappingURL=ListBulkActions-8ddaba3b.js.map
